<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Advent of Code Solutions</title>
        <link rel="stylesheet" href="style.css" />

        <script src="pkg/aoc_solutions.js"></script>
        <script>
            const { js_solve } = wasm_bindgen;

            window.onload = async () => {
                await wasm_bindgen();
                for (let elem of document.querySelectorAll("td")) {
                    console.log(elem)
                    let txt = elem.querySelector("button").innerText;

                    let year = parseInt(txt.split("-")[0]);
                    let day = parseInt(txt.split("-")[1]);

                    let ps = elem.querySelectorAll("p");
                    ps[0].id = txt + "-1";
                    ps[1].id = txt + "-2";

                    elem.querySelector("textarea").id = txt + "-input";

                    elem.querySelector("button").onclick = () => {
                        let input = document.getElementById(year + "-" + day + "-input");
                        let solution = js_solve(year, day, input.value);
                        document.getElementById(year + "-" + day + "-1").innerText = "Day 1: " + solution[0];
                        document.getElementById(year + "-" + day + "-2").innerText = "Day 2: " + solution[1];
                    };
                }
            }
        </script>
    </head>
    <body>
        <header>
            <h1 class="title-global">
                <a href="#">Advent of Code</a>
            </h1>
        </header>

        <table>
            <tr>
                <td>
                    <textarea></textarea>
                    <button>2015-1</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-2</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-3</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-4</button>
                    <p></p>
                    <p></p>
                </td>
            </tr>
            <tr>
                <td>
                    <textarea></textarea>
                    <button>2015-5</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-6</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-7</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-8</button>
                    <p></p>
                    <p></p>
                </td>
            </tr>
            <tr>
                <td>
                    <textarea></textarea>
                    <button>2015-9</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-10</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-11</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-12</button>
                    <p></p>
                    <p></p>
                </td>
            </tr>
            <tr>
                <td>
                    <textarea></textarea>
                    <button>2015-13</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-14</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-15</button>
                    <p></p>
                    <p></p>
                </td>
                <td>
                    <textarea></textarea>
                    <button>2015-16</button>
                    <p></p>
                    <p></p>
                </td>
            </tr>
        </table>
    </body>
</html>